<html>
<head>
  <title>The complete list of primes.</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="author" content="Luis Silvestre">
  <link rel="stylesheet" type="text/css" href="main.css">

<script type="text/javascript">
const PAGE_SIZE = 10000;
var page = 1;

function isPrime(n)
{
  if (n === 2 || n === 3) return true;
  if (n < 2 || n % 2 === 0 || n % 3 === 0) return false;

  var sqrt = 2;
  var old = 0;

  while (Math.abs(sqrt - old) > 1)
  {
    old = sqrt;
    sqrt = (sqrt + n / sqrt) / 2;
  }

  sqrt += 1;

  for (var i = 5; i <= sqrt; i += 6)
  {
    if (n % i === 0 || n % (i + 2) === 0) return false;
  }
  return true;
}

function render()
{
  var start = (page - 1) * PAGE_SIZE;
  start    += 5 - start % 6;
  var end   = page * PAGE_SIZE;
  end      += 5 - end % 6;
  var out = "";

  if (start < 6) {
    out += "2 3 ";
    start = 5;
  }

  for (var n = start; n < end; n += 6) {
    if (isPrime(n)) out += n + " ";
    if (isPrime(n + 2)) out += (n + 2) + " ";
  }

  document.getElementById("texto").textContent = out;
  document.getElementById("range").textContent =
    "Range: " + start + " â†’ " + end;
}

function nextPage()
{
  page++;
  render();
}

function previousPage()
{
  if (page > 1) page--;
  render();
}
  
function goToPage()
{
  var val = document.getElementById("pageInput").value;
  var p = parseInt(val, 10);

  if (isNaN(p) || p < 1) {
    alert("Please enter a positive integer (>= 1)");
    return;
  }

  page = p;
  render();
}

</script>
</head>

<body>

<div class="orangebox">
  <p>In this website we list <b>all</b> prime numbers. Every single one of them.</p>
</div>
  
<div class="orangebox">
  <a href="javascript:previousPage()">Previous page</a> |
  <a href="javascript:nextPage()">Next page</a>
  &nbsp;&nbsp;
  Go to page:
  <input id="pageInput" type="number" min="1" step="1" style="width:80px">
  <button onclick="goToPage()">Go</button>
</div>
<div id="range" class="whitebox">Range</div>

<div id="texto" class="whitebox" style="height:1100px; border:0px;">
JavaScript required.
</div>

<script type="text/javascript">
  render();
</script>

</body>
</html>
